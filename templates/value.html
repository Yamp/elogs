{% load express_tags %} {# Loading our tags #}

{% comment %}
    In the context there must be following variables:

    table_name
    field_name
    journal_page
{% endcomment %}

{% with val=table_data|keyval:field_name|choose_val:index %} {# Setting val variable#}
    {% with info=fields_info|keyval:journal_name|keyval:table_name|keyval:field_name %}

        {% if info.type == "number" and val|to_num > info.max_normal or val|to_num < info.min_normal %}
            <input class="form-control red" type="{{ info.type }}"
                   value="{{ val }}" title="{{ field_name }}" data-info="{{ info }}"/>
        {% else %}
            <input class="form-control" type="{{ info.type }}" value="{{ val }}" title="{{ field_name }}"/>
        {% endif %}

    {% endwith %}
{% endwith %}