{% load express_tags %}

{% with table_name="big_table" %}
    {% with table_data=full_data|table_keyval:table_name %}
    <form action="/common/change_table" method="post" autocomplete="off" oninput="on_form_change(this)">
        <input hidden name="table_name" value="{{ table_name }}">
        <input hidden name="journal_page" value="{{ journal_page }}">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th> Номер вагона </th>
                    <th> Наименование концентрата </th>
                    <th> Время поставки </th>
                    <th> Время сообщения диспетчеру </th>
                    <th> Время перепростоя </th>
                    <th> Поступило контейнеров </th>
                    <th> Поступило поддонов </th>
                    <th> Поступило упоров </th>
                    <th> Поступило скоб </th>
                </tr>
            </thead>
            <tbody>
                {% if table_data.wagon_num|length == 0 %}
                    <tr class="indexed-line">
                        <input class="index-input" hidden name="index" value=0>
                        <td>{% include "value.html" with field_name="wagon_num" index=0 %}</td>
                        <td>{% include "value.html" with field_name="conc_num" index=0 %}</td>
                        <td>{% include "value.html" with field_name="supply_time" index=0 %}</td>
                        <td>{% include "value.html" with field_name="dispatch_time" index=0 %}</td>
                        <td>{% include "value.html" with field_name="downtime" index=0 %}</td>
                        <td>{% include "value.html" with field_name="recieved_conc" index=0 %}</td>
                        <td>{% include "value.html" with field_name="recieved_beds" index=0 %}</td>
                        <td>{% include "value.html" with field_name="recieved_stops" index=0 %}</td>
                        <td>{% include "value.html" with field_name="recieved_braces" index=0 %}</td>
                    </tr>
                {% else %}

                {% for _ in table_data.wagon_num %}
                    <tr class="indexed-line">
                        <input class="index-input" hidden name="index" value="{{ forloop.counter0 }}">
                        <td>{% include "value.html" with field_name="wagon_num" index=forloop.counter0 %}</td>
                        <td>{% include "value.html" with field_name="conc_num" index=forloop.counter0 %}</td>
                        <td>{% include "value.html" with field_name="supply_time" index=forloop.counter0 %}</td>
                        <td>{% include "value.html" with field_name="dispatch_time" index=forloop.counter0 %}</td>
                        <td>{% include "value.html" with field_name="downtime" index=forloop.counter0 %}</td>
                        <td>{% include "value.html" with field_name="recieved_conc" index=forloop.counter0 %}</td>
                        <td>{% include "value.html" with field_name="recieved_beds" index=forloop.counter0 %}</td>
                        <td>{% include "value.html" with field_name="recieved_stops" index=forloop.counter0 %}</td>
                        <td>{% include "value.html" with field_name="recieved_braces" index=forloop.counter0 %}</td>
                    </tr>
                {% endfor %}
                {% endif %}
            </tbody>
        </table>
    </form>
    {% endwith %}
{% endwith %}

<script>
    $()
</script>
