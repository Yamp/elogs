{% load express_tags %}

{% with table_name="sgok_table" %}
    <form action="/common/change_table" method="post" autocomplete="off" oninput="on_form_change(this)">
        <input hidden name="table_name" value="{{ table_name }}">
        <input hidden name="journal_page" value="{{ journal_page }}">
        {% with table_data=full_data|table_keyval:table_name %}
        <table class="table table-bordered">
            <thead>
                <tr>
                    {% for column_name in sgok_table.columns %}
                        <th>{{ column_name }}</th>
                    {%  endfor %}
                </tr>
            </thead>
            <tbody>
            {% if table_data.sgok|length == 0 %}
                <tr class="indexed-line">
                    <input class="index-input" hidden name="index" value=0>
                    {% for name in sgok_table.fields %}
                    <td>{% include "value.html" with field_name=name index=0 %}</td>
                    {% endfor %}
                </tr>
            {% else %}
                {% for _ in table_data.sgok %}
                <tr class="indexed-line">
                    {% with row_index=forloop.counter0 %}
                    <input class="index-input" hidden name="index" value="{{ row_index }}">
                    {% for name in sgok_table.fields %}
                    <td>{% include "value.html" with field_name=name index=row_index %}</td>
                    {% endfor %}
                    {% endwith %}
                </tr>
                {% endfor %}
            {% endif %}
            </tbody>
        </table>
        {% endwith %}
        </form>
{% endwith %}