{% load express_tags %}


{% with table_name="repair_table" %}
<form action="/common/change_table" method="post" autocomplete="off" oninput="on_form_change(this)">
    <input hidden name="table_name" value="{{ table_name }}">
    <input hidden name="journal_page" value="{{ journal_page }}">
    {% with table_data=full_data|table_keyval:table_name %}
    <table class="table table-bordered">
        <thead>
            <tr>
                <th rowspan="2">Наименование оборудования</th>
                <th colspan="3">Записиь о дефектах, обнаруженных при осмотрах</th>
                <th colspan="3">Записиь о работах, выполненных по устранению дефектов</th>
            </tr>
            <tr>
                <th>Дата осмотра </th>
                <th>Наименование узла в характеристика дефектов</th>
                <th>Дата выполненных работ</th>
                <th>Объём выполненных работ по устранению дефектов</th>
                <th>Фактический срок службы узла, детали</th>
            </tr>
        </thead>
        <tbody>
             {% for_or_create _ in table_data.date_view %}
                 <tr class="indexed-line">
                     <input class="index-input" hidden name="index" value="{{ forloop.counter0 }}">
                     <td>{% include "value.html" with field_name="equipment" index=forloop.counter0 %}</td>
                     <td>{% include "value.html" with field_name="date_view" index=forloop.counter0 %}</td>
                     <td>{% include "value.html" with field_name="name_equipment" index=forloop.counter0 %}</td>
                     <td>{% include "value.html" with field_name="date_finish" index=forloop.counter0 %}</td>
                     <td>{% include "value.html" with field_name="volume_text" index=forloop.counter0 %}</td>
                     <td>{% include "value.html" with field_name="fact_time" index=forloop.counter0 %}</td>
                </tr>
            {% endfor_or_create %}
        </tbody>
    </table>
    {% endwith %}
</form>
{% endwith %}